name: Continuous integration
on:
  push:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout
        uses: actions/checkout@v5

      - name: Install dependencies
        run: |
          # Install tools used by `_tools/format.sh`.
          sudo apt-get -qq update
          sudo apt-get -qq install dos2unix recode
          sudo pip3 install -r requirements.txt
          sudo pip3 install codespell

      - name: Linter checks
        run: |
          bash _tools/format.sh
          codespell -I _tools/codespell-ignore.txt -x _tools/codespell-ignore-lines.txt {about,community,development,getting_started,tutorials}/**/*.rst

      # Use dummy builder to improve performance as we don't need the generated HTML in this workflow.
      - name: Sphinx build
        run: |
          sphinx-build --color -b dummy -d _build/doctrees -W . _build/html
