:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/RayCast3D.xml.

.. _class_RayCast3D:

RayCast3D
=========

**Inherits:** :ref:`Node3D<class_Node3D>` **<** :ref:`Node<class_Node>` **<** :ref:`Object<class_Object>`

Query the closest object intersecting a ray.

Description
-----------

A RayCast represents a line from its origin to its destination position, :ref:`target_position<class_RayCast3D_property_target_position>`. It is used to query the 3D space in order to find the closest object along the path of the ray.

RayCast3D can ignore some objects by adding them to the exception list via :ref:`add_exception<class_RayCast3D_method_add_exception>` or by setting proper filtering with collision layers and masks.

RayCast3D can be configured to report collisions with :ref:`Area3D<class_Area3D>`\ s (:ref:`collide_with_areas<class_RayCast3D_property_collide_with_areas>`) and/or :ref:`PhysicsBody3D<class_PhysicsBody3D>`\ s (:ref:`collide_with_bodies<class_RayCast3D_property_collide_with_bodies>`).

Only enabled raycasts will be able to query the space and report collisions.

RayCast3D calculates intersection every physics frame (see :ref:`Node<class_Node>`), and the result is cached so it can be used later until the next frame. If multiple queries are required between physics frames (or during the same frame), use :ref:`force_raycast_update<class_RayCast3D_method_force_raycast_update>` after adjusting the raycast.

Tutorials
---------

- :doc:`Ray-casting <../tutorials/physics/ray-casting>`

- `3D Voxel Demo <https://godotengine.org/asset-library/asset/676>`__

Properties
----------

+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`bool<class_bool>`       | :ref:`collide_with_areas<class_RayCast3D_property_collide_with_areas>`             | ``false``             |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`bool<class_bool>`       | :ref:`collide_with_bodies<class_RayCast3D_property_collide_with_bodies>`           | ``true``              |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`int<class_int>`         | :ref:`collision_mask<class_RayCast3D_property_collision_mask>`                     | ``1``                 |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`Color<class_Color>`     | :ref:`debug_shape_custom_color<class_RayCast3D_property_debug_shape_custom_color>` | ``Color(0, 0, 0, 1)`` |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`int<class_int>`         | :ref:`debug_shape_thickness<class_RayCast3D_property_debug_shape_thickness>`       | ``2``                 |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`bool<class_bool>`       | :ref:`enabled<class_RayCast3D_property_enabled>`                                   | ``true``              |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`bool<class_bool>`       | :ref:`exclude_parent<class_RayCast3D_property_exclude_parent>`                     | ``true``              |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`bool<class_bool>`       | :ref:`hit_from_inside<class_RayCast3D_property_hit_from_inside>`                   | ``false``             |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+
| :ref:`Vector3<class_Vector3>` | :ref:`target_position<class_RayCast3D_property_target_position>`                   | ``Vector3(0, -1, 0)`` |
+-------------------------------+------------------------------------------------------------------------------------+-----------------------+

Methods
-------

+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`add_exception<class_RayCast3D_method_add_exception>` **(** :ref:`CollisionObject3D<class_CollisionObject3D>` node **)**                                  |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`add_exception_rid<class_RayCast3D_method_add_exception_rid>` **(** :ref:`RID<class_RID>` rid **)**                                                       |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`clear_exceptions<class_RayCast3D_method_clear_exceptions>` **(** **)**                                                                                   |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`force_raycast_update<class_RayCast3D_method_force_raycast_update>` **(** **)**                                                                           |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Object<class_Object>`   | :ref:`get_collider<class_RayCast3D_method_get_collider>` **(** **)** |const|                                                                                   |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`RID<class_RID>`         | :ref:`get_collider_rid<class_RayCast3D_method_get_collider_rid>` **(** **)** |const|                                                                           |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`get_collider_shape<class_RayCast3D_method_get_collider_shape>` **(** **)** |const|                                                                       |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`       | :ref:`get_collision_mask_value<class_RayCast3D_method_get_collision_mask_value>` **(** :ref:`int<class_int>` layer_number **)** |const|                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>` | :ref:`get_collision_normal<class_RayCast3D_method_get_collision_normal>` **(** **)** |const|                                                                   |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>` | :ref:`get_collision_point<class_RayCast3D_method_get_collision_point>` **(** **)** |const|                                                                     |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`       | :ref:`is_colliding<class_RayCast3D_method_is_colliding>` **(** **)** |const|                                                                                   |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`remove_exception<class_RayCast3D_method_remove_exception>` **(** :ref:`CollisionObject3D<class_CollisionObject3D>` node **)**                            |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`remove_exception_rid<class_RayCast3D_method_remove_exception_rid>` **(** :ref:`RID<class_RID>` rid **)**                                                 |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                          | :ref:`set_collision_mask_value<class_RayCast3D_method_set_collision_mask_value>` **(** :ref:`int<class_int>` layer_number, :ref:`bool<class_bool>` value **)** |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+

Property Descriptions
---------------------

.. _class_RayCast3D_property_collide_with_areas:

- :ref:`bool<class_bool>` **collide_with_areas**

+-----------+---------------------------------+
| *Default* | ``false``                       |
+-----------+---------------------------------+
| *Setter*  | set_collide_with_areas(value)   |
+-----------+---------------------------------+
| *Getter*  | is_collide_with_areas_enabled() |
+-----------+---------------------------------+

If ``true``, collision with :ref:`Area3D<class_Area3D>`\ s will be reported.

----

.. _class_RayCast3D_property_collide_with_bodies:

- :ref:`bool<class_bool>` **collide_with_bodies**

+-----------+----------------------------------+
| *Default* | ``true``                         |
+-----------+----------------------------------+
| *Setter*  | set_collide_with_bodies(value)   |
+-----------+----------------------------------+
| *Getter*  | is_collide_with_bodies_enabled() |
+-----------+----------------------------------+

If ``true``, collision with :ref:`PhysicsBody3D<class_PhysicsBody3D>`\ s will be reported.

----

.. _class_RayCast3D_property_collision_mask:

- :ref:`int<class_int>` **collision_mask**

+-----------+---------------------------+
| *Default* | ``1``                     |
+-----------+---------------------------+
| *Setter*  | set_collision_mask(value) |
+-----------+---------------------------+
| *Getter*  | get_collision_mask()      |
+-----------+---------------------------+

The ray's collision mask. Only objects in at least one collision layer enabled in the mask will be detected. See `Collision layers and masks <../tutorials/physics/physics_introduction.html#collision-layers-and-masks>`__ in the documentation for more information.

----

.. _class_RayCast3D_property_debug_shape_custom_color:

- :ref:`Color<class_Color>` **debug_shape_custom_color**

+-----------+-------------------------------------+
| *Default* | ``Color(0, 0, 0, 1)``               |
+-----------+-------------------------------------+
| *Setter*  | set_debug_shape_custom_color(value) |
+-----------+-------------------------------------+
| *Getter*  | get_debug_shape_custom_color()      |
+-----------+-------------------------------------+

The custom color to use to draw the shape in the editor and at run-time if **Visible Collision Shapes** is enabled in the **Debug** menu. This color will be highlighted at run-time if the ``RayCast3D`` is colliding with something.

If set to ``Color(0.0, 0.0, 0.0)`` (by default), the color set in :ref:`ProjectSettings.debug/shapes/collision/shape_color<class_ProjectSettings_property_debug/shapes/collision/shape_color>` is used.

----

.. _class_RayCast3D_property_debug_shape_thickness:

- :ref:`int<class_int>` **debug_shape_thickness**

+-----------+----------------------------------+
| *Default* | ``2``                            |
+-----------+----------------------------------+
| *Setter*  | set_debug_shape_thickness(value) |
+-----------+----------------------------------+
| *Getter*  | get_debug_shape_thickness()      |
+-----------+----------------------------------+

If set to ``1``, a line is used as the debug shape. Otherwise, a truncated pyramid is drawn to represent the ``RayCast3D``. Requires **Visible Collision Shapes** to be enabled in the **Debug** menu for the debug shape to be visible at run-time.

----

.. _class_RayCast3D_property_enabled:

- :ref:`bool<class_bool>` **enabled**

+-----------+--------------------+
| *Default* | ``true``           |
+-----------+--------------------+
| *Setter*  | set_enabled(value) |
+-----------+--------------------+
| *Getter*  | is_enabled()       |
+-----------+--------------------+

If ``true``, collisions will be reported.

----

.. _class_RayCast3D_property_exclude_parent:

- :ref:`bool<class_bool>` **exclude_parent**

+-----------+--------------------------------+
| *Default* | ``true``                       |
+-----------+--------------------------------+
| *Setter*  | set_exclude_parent_body(value) |
+-----------+--------------------------------+
| *Getter*  | get_exclude_parent_body()      |
+-----------+--------------------------------+

If ``true``, collisions will be ignored for this RayCast3D's immediate parent.

----

.. _class_RayCast3D_property_hit_from_inside:

- :ref:`bool<class_bool>` **hit_from_inside**

+-----------+------------------------------+
| *Default* | ``false``                    |
+-----------+------------------------------+
| *Setter*  | set_hit_from_inside(value)   |
+-----------+------------------------------+
| *Getter*  | is_hit_from_inside_enabled() |
+-----------+------------------------------+

If ``true``, the ray will detect a hit when starting inside shapes. In this case the collision normal will be ``Vector3(0, 0, 0)``. Does not affect shapes with no volume like concave polygon or heightmap.

----

.. _class_RayCast3D_property_target_position:

- :ref:`Vector3<class_Vector3>` **target_position**

+-----------+----------------------------+
| *Default* | ``Vector3(0, -1, 0)``      |
+-----------+----------------------------+
| *Setter*  | set_target_position(value) |
+-----------+----------------------------+
| *Getter*  | get_target_position()      |
+-----------+----------------------------+

The ray's destination point, relative to the RayCast's ``position``.

Method Descriptions
-------------------

.. _class_RayCast3D_method_add_exception:

- void **add_exception** **(** :ref:`CollisionObject3D<class_CollisionObject3D>` node **)**

Adds a collision exception so the ray does not report collisions with the specified :ref:`CollisionObject3D<class_CollisionObject3D>` node.

----

.. _class_RayCast3D_method_add_exception_rid:

- void **add_exception_rid** **(** :ref:`RID<class_RID>` rid **)**

Adds a collision exception so the ray does not report collisions with the specified :ref:`RID<class_RID>`.

----

.. _class_RayCast3D_method_clear_exceptions:

- void **clear_exceptions** **(** **)**

Removes all collision exceptions for this ray.

----

.. _class_RayCast3D_method_force_raycast_update:

- void **force_raycast_update** **(** **)**

Updates the collision information for the ray. Use this method to update the collision information immediately instead of waiting for the next ``_physics_process`` call, for example if the ray or its parent has changed state.

\ **Note:** :ref:`enabled<class_RayCast3D_property_enabled>` does not need to be ``true`` for this to work.

----

.. _class_RayCast3D_method_get_collider:

- :ref:`Object<class_Object>` **get_collider** **(** **)** |const|

Returns the first object that the ray intersects, or ``null`` if no object is intersecting the ray (i.e. :ref:`is_colliding<class_RayCast3D_method_is_colliding>` returns ``false``).

----

.. _class_RayCast3D_method_get_collider_rid:

- :ref:`RID<class_RID>` **get_collider_rid** **(** **)** |const|

Returns the :ref:`RID<class_RID>` of the first object that the ray intersects, or an empty :ref:`RID<class_RID>` if no object is intersecting the ray (i.e. :ref:`is_colliding<class_RayCast3D_method_is_colliding>` returns ``false``).

----

.. _class_RayCast3D_method_get_collider_shape:

- :ref:`int<class_int>` **get_collider_shape** **(** **)** |const|

Returns the shape ID of the first object that the ray intersects, or ``0`` if no object is intersecting the ray (i.e. :ref:`is_colliding<class_RayCast3D_method_is_colliding>` returns ``false``).

----

.. _class_RayCast3D_method_get_collision_mask_value:

- :ref:`bool<class_bool>` **get_collision_mask_value** **(** :ref:`int<class_int>` layer_number **)** |const|

Returns whether or not the specified layer of the :ref:`collision_mask<class_RayCast3D_property_collision_mask>` is enabled, given a ``layer_number`` between 1 and 32.

----

.. _class_RayCast3D_method_get_collision_normal:

- :ref:`Vector3<class_Vector3>` **get_collision_normal** **(** **)** |const|

Returns the normal of the intersecting object's shape at the collision point, or ``Vector3(0, 0, 0)`` if the ray starts inside the shape and :ref:`hit_from_inside<class_RayCast3D_property_hit_from_inside>` is ``true``.

----

.. _class_RayCast3D_method_get_collision_point:

- :ref:`Vector3<class_Vector3>` **get_collision_point** **(** **)** |const|

Returns the collision point at which the ray intersects the closest object.

\ **Note:** This point is in the **global** coordinate system.

----

.. _class_RayCast3D_method_is_colliding:

- :ref:`bool<class_bool>` **is_colliding** **(** **)** |const|

Returns whether any object is intersecting with the ray's vector (considering the vector length).

----

.. _class_RayCast3D_method_remove_exception:

- void **remove_exception** **(** :ref:`CollisionObject3D<class_CollisionObject3D>` node **)**

Removes a collision exception so the ray does report collisions with the specified :ref:`CollisionObject3D<class_CollisionObject3D>` node.

----

.. _class_RayCast3D_method_remove_exception_rid:

- void **remove_exception_rid** **(** :ref:`RID<class_RID>` rid **)**

Removes a collision exception so the ray does report collisions with the specified :ref:`RID<class_RID>`.

----

.. _class_RayCast3D_method_set_collision_mask_value:

- void **set_collision_mask_value** **(** :ref:`int<class_int>` layer_number, :ref:`bool<class_bool>` value **)**

Based on ``value``, enables or disables the specified layer in the :ref:`collision_mask<class_RayCast3D_property_collision_mask>`, given a ``layer_number`` between 1 and 32.

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
.. |constructor| replace:: :abbr:`constructor (This method is used to construct a type.)`
.. |static| replace:: :abbr:`static (This method doesn't need an instance to be called, so it can be called directly using the class name.)`
.. |operator| replace:: :abbr:`operator (This method describes a valid operator to use with this type as left-hand operand.)`
